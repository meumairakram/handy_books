(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{58:function(e,t,a){e.exports=a(95)},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(47),l=a.n(o),i=a(8),c=a(11),s=a(18),u=a(52),m=a.n(u),d=a(53),p=a.n(d),h=a(12);var v=Object(s.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_BOOKS":return t.payload;case"GET_BOOK_WITH_REVIEWER":return Object(h.a)({},e,{info:t.payload.book,reviewer:t.payload.user});case"ADD_BOOK":return Object(h.a)({},e,{new_book:t.payload});case"REVIEWS_BY_OWNER":return Object(h.a)({},e,{reviews:t.payload});case"UPDATE_BOOK":return Object(h.a)({},e,{info:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":case"AUTH_USER":return Object(h.a)({},e,{login:t.payload});default:return e}}}),E=a(2),b=a(3),f=a(5),g=a(4),O=a(6),y=a(36),k=a(14),j=a.n(k);function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=j.a.get("/api/getAllBooks?limit=".concat(e,"&offset=").concat(t)).then((function(e){return""===a?e.data:[].concat(Object(y.a)(a),Object(y.a)(e.data))}));return{type:"GET_ALL_BOOKS",payload:n}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==e){var t=j.a.get("/api/getBook?id=".concat(e));return function(e){t.then((function(t){var a=t.data;j.a.get("/api/getReviewer/?user=".concat(a.ownerId)).then((function(t){var n=t.data;e({type:"GET_BOOK_WITH_REVIEWER",payload:{book:a,user:n}})}))}))}}}function N(){return{type:"AUTH_USER",payload:j()("/api/auth").then((function(e){return e.data}))}}var C=function(e){return r.a.createElement(i.b,{to:"/books/".concat(e._id),className:"book_item"},r.a.createElement("div",{className:"book_header"},r.a.createElement("h2",null,e.name)),r.a.createElement("div",{className:"book_items"},r.a.createElement("div",{className:"book_author"},e.author),r.a.createElement("div",{className:"book_bubble"},r.a.createElement("strong",null,"Price")," $",e.price),r.a.createElement("div",{className:"book_bubble"},r.a.createElement("strong",null,"Pages")," $",e.pages),r.a.createElement("div",{className:"book_bubble"},r.a.createElement("strong",null,"Rating")," $",e.rating)))},x=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).renderElement=function(e){return Array.isArray(e)?e.map((function(e,t){return r.a.createElement(C,Object.assign({},e,{key:e._id}))})):""},a.handleLoadMore=function(){a.props.dispatch(_(2,a.props.books.length,a.props.books))},a.state={},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(_(3,0))}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderElement(this.props.books),r.a.createElement("div",{className:"loadmore",onClick:this.handleLoadMore},"Load More"))}}]),t}(n.Component),R=Object(c.b)((function(e){return{books:e.books}}))(x),S=function(e){return r.a.createElement("div",null,r.a.createElement(R,null))},B=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).renderBook=function(e){return console.log(e),e.info?r.a.createElement("div",{className:"br_container"},r.a.createElement("div",{className:"br_header"},r.a.createElement("h2",null,e.info.name),r.a.createElement("h5",null,e.info.author),r.a.createElement("div",{className:"br_reviewer"},r.a.createElement("span",null,"Reviwed by:")," ",e.reviewer.name," ",e.reviewer.lastname)),r.a.createElement("div",{className:"br_review"},e.info.review),r.a.createElement("div",{className:"br_box"},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,r.a.createElement("span",null,"Price: ")," ",e.info.price),r.a.createElement("div",null,r.a.createElement("span",null,"Pages: ")," ",e.info.pages)),r.a.createElement("div",{className:"right"},r.a.createElement("span",null,"Rating:"),r.a.createElement("div",null,e.info.rating,"/5")))):null},a.state={},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(w(this.props.match.params.id))}},{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",null,this.renderBook(this.props.book))}}]),t}(n.Component),A=Object(c.b)((function(e){return{book:e.books}}))(B),I=a(26),D=a.n(I),H=a(54),T=a.n(H),L=function(e){var t=[{type:"navItem",icon:"home",text:"Home",link:"/",restricted:!1},{type:"navItem",icon:"user-circle",text:"My Profile",link:"/user",restricted:!1},{type:"navItem",icon:"address-card-o",text:"Add Admins",link:"/user/register",restricted:!1},{type:"navItem",icon:"sign-in",text:"Login",link:"/login",restricted:!1},{type:"navItem",icon:"user-o",text:"My Reviews",link:"/user/my_reviews",restricted:!1},{type:"navItem",icon:"plus-square-o",text:"Add Reviews",link:"/user/add",restricted:!1},{type:"navItem",icon:"sign-out",text:"Logout",link:"/logout",restricted:!1}];return r.a.createElement("div",null,t.map((function(t,a){return function(t,a){return r.a.createElement("div",{key:a,className:t.type},r.a.createElement(i.b,{to:t.link,onClick:e.linkClicked},r.a.createElement(D.a,{name:t.icon}),t.text))}(t,a)})))},U=function(e){function t(){return Object(E.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement(T.a,{showNav:this.props.showNav,navStyle:{backgroundColor:"#222222"},titleStyle:{backgroundColor:" #0495a8"},title:"BookShelf Menu",onHideNav:this.props.hideNav},r.a.createElement(L,{linkClicked:this.props.linkedClicked}))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).onChange=function(){a.setState({showNav:!1})},a.openNav=function(){this.setState({showNav:!0})},a.linkedClicked=function(){a.setState({showNav:!1})},a.state={showNav:!1},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("header",null,r.a.createElement("div",{className:"open_nav"},r.a.createElement(D.a,{name:"bars",onClick:function(){return e.openNav()},style:{color:"#FFF",padding:"10px",cursor:"pointer"}})),r.a.createElement(U,{showNav:this.state.showNav,linkedClicked:this.linkedClicked,hideNav:this.onChange}),r.a.createElement(i.b,{to:"/",className:"logo"},"Books Project"))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement(P,null),this.props.children)}}]),t}(n.Component),W=a(17),V=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).onChangeHandler=function(e){a.setState(Object(W.a)({},e.target.name,e.target.value))},a.submitHandler=function(e){e.preventDefault(),a.props.dispatch(function(e){var t=e.email,a=e.password;return{type:"LOGIN_USER",payload:j.a.post("/api/login",{email:t,password:a}).then((function(e){return e.data}))}}(a.state))},a.state={email:"",password:"",error:""},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.user.login&&this.props.user.login.isAuth&&this.props.history.push("/user")}},{key:"render",value:function(){var e=this.props.user;return r.a.createElement("div",{className:"rl_container"},r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("h2",null,"Login Here"),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter your email",value:this.state.email,onChange:this.onChangeHandler})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.onChangeHandler})),r.a.createElement("button",null,"Login"),r.a.createElement("div",{className:"error"},e.login?r.a.createElement("div",null,e.login.error):null)))}}]),t}(n.Component);var K=Object(c.b)((function(e){return console.log(e),{user:e.user}}))(V),G=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.user.login;return r.a.createElement("div",{className:"user_container"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{alt:"avatar",src:"/images/avatar.png"})),r.a.createElement("div",{className:"nfo"},r.a.createElement("div",null,r.a.createElement("span",null,"Firstname:")," ",e.name," "),r.a.createElement("div",null,r.a.createElement("span",null,"Email:")," ",e.email," ")))}}]),t}(n.Component),F=a(57),$=function(e){var t,a=Object(F.a)({initialValues:Object(h.a)({name:"",price:"",author:"",pages:"",review:"",rating:""},e.defaultValues),onSubmit:function(t,a){a.resetForm(),e.submitHandler(t)}}),n=a.values,o=a.handleSubmit,l=a.handleChange;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:o},r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",name:"name",value:n.name,onChange:l,placeholder:"Enter name"})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",name:"author",value:n.author,onChange:l,placeholder:"Enter Author"})),r.a.createElement("div",{className:"form_element"},r.a.createElement("textarea",(t={name:"review"},Object(W.a)(t,"name","review"),Object(W.a)(t,"value",n.review),Object(W.a)(t,"onChange",l),t))),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",name:"pages",value:n.pages,onChange:l,placeholder:"Pages"})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",name:"rating",value:n.rating,onChange:l,placeholder:"Rating"})),r.a.createElement("div",{className:"form_element"},r.a.createElement("input",{type:"text",name:"price",value:n.price,onChange:l,placeholder:"Enter Price"})),r.a.createElement("button",{type:"submit"},e.buttonText)))},J=function(e){return r.a.createElement("div",{className:"loader"},"Loading...")},Y=a(20),q=a.n(Y),z=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).addReviewer=function(e){var t=Object(h.a)({},e,{ownerId:a.props.user.login.user_id});return a.setState({loading:!0}),a.props.dispatch(function(e){return{type:"ADD_BOOK",payload:j.a.post("/api/book",e).then((function(e){return e.data}))}}(t)),!0},a.state={loading:!1,success:!1},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){!q.a.empty(this.props.reviews)&&q.a.empty(e.reviews)&&this.setState({loading:!1,success:!0})}},{key:"render",value:function(){return this.state.loading?r.a.createElement(J,null):r.a.createElement("div",{className:"rl_container"},r.a.createElement("h2",null,"Add Review"),r.a.createElement($,{submitHandler:this.addReviewer,defaultValues:{rating:"5",price:"0"},buttonText:"Add Review"}),this.state.success?r.a.createElement("div",{className:"success"}," Successfully Added Book "):"")}}]),t}(n.Component),Q=Object(c.b)((function(e){return{reviews:e.books}}))(z),X=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).renderReviewItems=function(e){return e?e.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.author),r.a.createElement("td",null,r.a.createElement(i.b,{to:"/user/edit/".concat(e._id)},"Edit")))})):null},a.state={},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user.login.user_id;this.props.dispatch(function(e){var t=j.a.post("/api/getBooksByOwner",{ownerid:e});return function(e){t.then((function(t){e({type:"REVIEWS_BY_OWNER",payload:t.data})}))}}(e))}},{key:"render",value:function(){var e=this.props.reviews;return console.log(this.props),r.a.createElement("div",{class:"rl_container"},r.a.createElement("h2",null,"My Reviews"),r.a.createElement("table",{style:{maxWidth:"800px",margin:"0px auto"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr."),r.a.createElement("th",null,"Book Name"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,q.a.empty(e)?null:this.renderReviewItems(this.props.reviews.reviews))))}}]),t}(n.Component),Z=Object(c.b)((function(e){return{reviews:e.books}}))(X),ee=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).renderDefaultValues=function(e){var t=e.bookInfo;if(t.info&&t.info.hasOwnProperty("name")){var n={name:t.info.name,rating:t.info.rating,author:t.info.author,pages:t.info.pages,price:t.info.price,review:t.info.review};return r.a.createElement($,{submitHandler:a.handleEditBook,defaultValues:n,buttonText:"Update Review"})}return r.a.createElement(r.a.Fragment,null)},a.handleEditBook=function(e){var t=Object(h.a)({book_id:a.props.match.params.id},e);a.props.dispatch(function(e){var t=j.a.post("/api/updateBook",e);return function(e){t.then((function(t){var a=t.data;e({type:"UPDATE_BOOK",payload:a})}))}}(t)),a.setState({editSaved:!0})},a.state={loading:!1,editSaved:!1},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.dispatch(w(e))}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"GET_BOOK_WITH_REVIEWER",payload:{book:{},user:{}}})}},{key:"render",value:function(){return this.state.loading?r.a.createElement(J,null):r.a.createElement("div",{className:"rl_container"},r.a.createElement("h2",null,"Edit Review"),this.renderDefaultValues(this.props),this.state.editSaved?r.a.createElement("div",{className:"success"},"Book Updated Successfully."):"")}}]),t}(n.PureComponent),te=Object(c.b)((function(e){return{bookInfo:e.books}}))(ee),ae=function(e){console.log(e);j.a.get("/api/logout").then((function(t){t.data;setTimeout((function(){e.history.push("/")}),1e3)}));return r.a.createElement("div",{className:"logout_container"},r.a.createElement("h1",null," Good Bye! See you soon... "))};function ne(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(a){function n(e){var t;return Object(E.a)(this,n),(t=Object(f.a)(this,Object(g.a)(n).call(this,e))).state={loading:!0},t}return Object(O.a)(n,a),Object(b.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(N())}},{key:"componentDidUpdate",value:function(e,a,n){a.loading&&this.setState({loading:!1});var r=this.props.user;r.login&&(r.login.isAuth&&null==t&&this.props.history.push("/"),r.login.isAuth||1!=t||this.props.history.push("/login"))}},{key:"render",value:function(){var t=this.props.user;return this.state.loading?r.a.createElement("div",{className:"loader"},"Loading..."):t.login.isAuth?r.a.createElement(e,this.props):r.a.createElement(e,null)}}]),n}(n.Component);function o(e){return{user:e.user}}return Object(c.b)(o)(a)}var re=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement(M,null,r.a.createElement(i.d,null,r.a.createElement(i.c,{path:"/",exact:!0,component:ne(S)}),r.a.createElement(i.c,{path:"/login",exact:!0,component:ne(K,null)}),r.a.createElement(i.c,{path:"/logout",exact:!0,component:ne(ae,!0)}),r.a.createElement(i.c,{path:"/books/:id",exact:!0,component:ne(A,!0)}),r.a.createElement(i.c,{path:"/user",exact:!0,component:ne(G,!0)}),r.a.createElement(i.c,{path:"/user/add",exact:!0,component:ne(Q,!0)}),r.a.createElement(i.c,{path:"/user/my_reviews",exact:!0,component:ne(Z,!0)}),r.a.createElement(i.c,{path:"/user/edit/:id",exact:!0,component:ne(te,!0)})))}}]),t}(n.Component),oe=Object(s.a)(p.a,m.a)(s.d);l.a.render(r.a.createElement((function(){return r.a.createElement(c.a,{store:oe(v)},r.a.createElement(i.a,null,r.a.createElement(re,null)))}),null),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.65bdd956.chunk.js.map